{"ast":null,"code":"import { catchError, throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../services/account.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\n\nfunction AccountsComponent_ng_template_18_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.errorMessage);\n  }\n}\n\nfunction AccountsComponent_ng_template_18_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Loading... \");\n  }\n}\n\nfunction AccountsComponent_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AccountsComponent_ng_template_18_ng_container_0_Template, 3, 1, \"ng-container\", 17);\n    i0.ɵɵtemplate(1, AccountsComponent_ng_template_18_ng_template_1_Template, 1, 0, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n  }\n\n  if (rf & 2) {\n    const _r5 = i0.ɵɵreference(2);\n\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.errorMessage)(\"ngIfElse\", _r5);\n  }\n}\n\nfunction AccountsComponent_ng_container_20_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 25);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"number\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const op_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(op_r10.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 4, op_r10.operationDate, \"dd-MM-yyyy:HH-mm-ss\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(op_r10.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 7, op_r10.amount, \"1.2-2\"));\n  }\n}\n\nfunction AccountsComponent_ng_container_20_li_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 26);\n    i0.ɵɵlistener(\"click\", function AccountsComponent_ng_container_20_li_26_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r14);\n      const page_r12 = restoredCtx.index;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.gotoPage(page_r12));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const page_r12 = ctx.index;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", page_r12 == ctx_r9.currentPage ? \"btn btn-info\" : \"btn btn-outline-info\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(page_r12);\n  }\n}\n\nconst _c0 = function () {\n  return [];\n};\n\nfunction AccountsComponent_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 20)(2, \"label\");\n    i0.ɵɵtext(3, \"Account ID:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\", 21);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 20)(7, \"label\");\n    i0.ɵɵtext(8, \"Balance:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"label\", 21);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"table\", 22)(13, \"thead\")(14, \"tr\")(15, \"th\");\n    i0.ɵɵtext(16, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\");\n    i0.ɵɵtext(18, \"Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"th\");\n    i0.ɵɵtext(20, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"th\");\n    i0.ɵɵtext(22, \"Amount\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"tbody\");\n    i0.ɵɵtemplate(24, AccountsComponent_ng_container_20_tr_24_Template, 11, 10, \"tr\", 23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"ul\", 24);\n    i0.ɵɵtemplate(26, AccountsComponent_ng_container_20_li_26_Template, 3, 2, \"li\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const accountDetails_r7 = ctx.ngIf;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(accountDetails_r7.accountId);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 4, accountDetails_r7.balance, \"1.2-2\"));\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngForOf\", accountDetails_r7.accountOperationDTOS);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(7, _c0).constructor(accountDetails_r7.totalPages));\n  }\n}\n\nfunction AccountsComponent_div_22_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"label\", 35);\n    i0.ɵɵtext(2, \"Account Destination:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 40);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AccountsComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4);\n    i0.ɵɵtext(3, \"Operations\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 7)(5, \"form\", 27);\n    i0.ɵɵlistener(\"ngSubmit\", function AccountsComponent_div_22_Template_form_ngSubmit_5_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.handleAccountOperation());\n    });\n    i0.ɵɵelementStart(6, \"div\", 28);\n    i0.ɵɵelement(7, \"input\", 29);\n    i0.ɵɵelementStart(8, \"label\", 30);\n    i0.ɵɵtext(9, \"DEBIT\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 28);\n    i0.ɵɵelement(11, \"input\", 31);\n    i0.ɵɵelementStart(12, \"label\", 30);\n    i0.ɵɵtext(13, \"CREDIT\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 28);\n    i0.ɵɵelement(15, \"input\", 32);\n    i0.ɵɵelementStart(16, \"label\", 30);\n    i0.ɵɵtext(17, \"TRANSFER\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(18, AccountsComponent_div_22_div_18_Template, 4, 0, \"div\", 33);\n    i0.ɵɵelementStart(19, \"div\", 34)(20, \"label\", 35);\n    i0.ɵɵtext(21, \"Amount:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(22, \"input\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 34)(24, \"label\", 35);\n    i0.ɵɵtext(25, \"Description:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(26, \"input\", 37);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"div\", 38)(28, \"button\", 39);\n    i0.ɵɵtext(29, \"Save Operation\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formGroup\", ctx_r3.operationFromGroup);\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.operationFromGroup.value.operationType === \"TRANSFER\");\n  }\n}\n\nexport class AccountsComponent {\n  constructor(fb, accountService) {\n    this.fb = fb;\n    this.accountService = accountService;\n    this.currentPage = 0;\n    this.pageSize = 5;\n  }\n\n  ngOnInit() {\n    this.accountFormGroup = this.fb.group({\n      accountId: this.fb.control('')\n    });\n    this.operationFromGroup = this.fb.group({\n      operationType: this.fb.control(null),\n      amount: this.fb.control(0),\n      description: this.fb.control(null),\n      accountDestination: this.fb.control(null)\n    });\n  }\n\n  handleSearchAccount() {\n    let accountId = this.accountFormGroup.value.accountId;\n    this.account$ = this.accountService.getAccount(accountId, this.currentPage, this.pageSize).pipe(catchError(err => {\n      this.errorMessage = err.message;\n      return throwError(err);\n    }));\n  }\n\n  gotoPage(page) {\n    this.currentPage = page;\n    this.handleSearchAccount();\n  }\n\n  handleAccountOperation() {\n    let accountId = this.accountFormGroup.value.accountId;\n    let operationType = this.operationFromGroup.value.operationType;\n    let amount = this.operationFromGroup.value.amount;\n    let description = this.operationFromGroup.value.description;\n    let accountDestination = this.operationFromGroup.value.accountDestination;\n\n    if (operationType == 'DEBIT') {\n      this.accountService.debit(accountId, amount, description).subscribe({\n        next: data => {\n          alert(\"Success Debit\");\n          this.operationFromGroup.reset();\n          this.handleSearchAccount();\n        },\n        error: err => {\n          console.log(err);\n        }\n      });\n    } else if (operationType == 'CREDIT') {\n      this.accountService.credit(accountId, amount, description).subscribe({\n        next: data => {\n          alert(\"Success Credit\");\n          this.operationFromGroup.reset();\n          this.handleSearchAccount();\n        },\n        error: err => {\n          console.log(err);\n        }\n      });\n    } else if (operationType == 'TRANSFER') {\n      this.accountService.transfer(accountId, accountDestination, amount, description).subscribe({\n        next: data => {\n          alert(\"Success Transfer\");\n          this.operationFromGroup.reset();\n          this.handleSearchAccount();\n        },\n        error: err => {\n          console.log(err);\n        }\n      });\n    }\n  }\n\n}\n\nAccountsComponent.ɵfac = function AccountsComponent_Factory(t) {\n  return new (t || AccountsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AccountService));\n};\n\nAccountsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AccountsComponent,\n  selectors: [[\"app-accounts\"]],\n  decls: 23,\n  vars: 5,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"card\", \"shadow\"], [1, \"card-header\", \"bg-primary\", \"text-white\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [\"routerLink\", \"/home\", 1, \"btn\", \"btn-outline-light\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"input-group\", \"mb-3\"], [1, \"input-group-text\"], [\"type\", \"text\", \"formControlName\", \"accountId\", 1, \"form-control\"], [1, \"btn\", \"btn-info\"], [1, \"bi\", \"bi-search\"], [\"errorTemplate\", \"\"], [4, \"ngIf\"], [\"class\", \"col-md-6\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"loading\", \"\"], [1, \"text-danger\"], [1, \"mb-2\"], [1, \"fw-bold\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [1, \"nav\", \"nav-pills\"], [1, \"text-end\"], [1, \"ms-1\", \"mt-1\", 3, \"ngClass\", \"click\"], [\"method\", \"post\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-check\", \"form-check-inline\"], [\"type\", \"radio\", \"formControlName\", \"operationType\", \"value\", \"DEBIT\", 1, \"form-check-input\"], [1, \"form-check-label\"], [\"type\", \"radio\", \"formControlName\", \"operationType\", \"value\", \"CREDIT\", 1, \"form-check-input\"], [\"type\", \"radio\", \"formControlName\", \"operationType\", \"value\", \"TRANSFER\", 1, \"form-check-input\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"amount\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"description\", 1, \"form-control\"], [1, \"d-grid\"], [1, \"btn\", \"btn-success\"], [\"type\", \"text\", \"formControlName\", \"accountDestination\", 1, \"form-control\"]],\n  template: function AccountsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"span\");\n      i0.ɵɵtext(7, \"Accounts\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"a\", 6);\n      i0.ɵɵtext(9, \"Back to Home\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"div\", 7)(11, \"form\", 8);\n      i0.ɵɵlistener(\"ngSubmit\", function AccountsComponent_Template_form_ngSubmit_11_listener() {\n        return ctx.handleSearchAccount();\n      });\n      i0.ɵɵelementStart(12, \"div\", 9)(13, \"label\", 10);\n      i0.ɵɵtext(14, \"Account Id:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"input\", 11);\n      i0.ɵɵelementStart(16, \"button\", 12);\n      i0.ɵɵelement(17, \"i\", 13);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(18, AccountsComponent_ng_template_18_Template, 3, 2, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(20, AccountsComponent_ng_container_20_Template, 27, 8, \"ng-container\", 15);\n      i0.ɵɵpipe(21, \"async\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(22, AccountsComponent_div_22_Template, 30, 2, \"div\", 16);\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"formGroup\", ctx.accountFormGroup);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(21, 3, ctx.account$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.accountFormGroup.controls[\"accountId\"].valid && ctx.accountFormGroup.controls[\"accountId\"].touched);\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.RouterLinkWithHref, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.RadioControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i3.AsyncPipe, i3.DecimalPipe, i3.DatePipe],\n  styles: [\".card-3d[_ngcontent-%COMP%] {\\n  perspective: 1000px;\\n}\\n\\n.card-3d[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%] {\\n  transform-style: preserve-3d;\\n  transition: transform 0.5s;\\n}\\n\\n.card-3d[_ngcontent-%COMP%]:hover   .card-body[_ngcontent-%COMP%] {\\n  transform: rotateY(20deg);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UseUJBQXlCO0FBQzNCIiwiZmlsZSI6ImFjY291bnRzLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZC0zZCB7XG4gIHBlcnNwZWN0aXZlOiAxMDAwcHg7XG59XG5cbi5jYXJkLTNkIC5jYXJkLWJvZHkge1xuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC41cztcbn1cblxuLmNhcmQtM2Q6aG92ZXIgLmNhcmQtYm9keSB7XG4gIHRyYW5zZm9ybTogcm90YXRlWSgyMGRlZyk7XG59XG5cbiJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["catchError","throwError","i0","_r5","AccountsComponent","constructor","fb","accountService","ngOnInit","accountFormGroup","group","accountId","control","operationFromGroup","operationType","amount","description","accountDestination","handleSearchAccount","value","account$","getAccount","currentPage","pageSize","pipe","err","errorMessage","message","gotoPage","page","handleAccountOperation","debit","subscribe","next","data","alert","reset","error","console","log","credit","transfer","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/badre/Downloads/Digital-Banking/DigitalBfront/src/app/accounts/accounts.component.ts","/Users/badre/Downloads/Digital-Banking/DigitalBfront/src/app/accounts/accounts.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\nimport {AccountService} from \"../services/account.service\";\nimport {catchError, Observable, throwError} from \"rxjs\";\nimport {AccountDetails} from \"../model/bankAccount.model\";\n\n@Component({\n  selector: 'app-accounts',\n  templateUrl: './accounts.component.html',\n  styleUrls: ['./accounts.component.css']\n})\nexport class AccountsComponent implements OnInit {\n  accountFormGroup! : FormGroup;\n  currentPage : number =0;\n  pageSize : number =5;\n  account$! : Observable<AccountDetails>\n  operationFromGroup! : FormGroup;\n  errorMessage! :string ;\n\n  constructor(private fb : FormBuilder, private accountService : AccountService) { }\n\n  ngOnInit(): void {\n    this.accountFormGroup=this.fb.group({\n      accountId : this.fb.control('')\n    });\n    this.operationFromGroup=this.fb.group({\n      operationType : this.fb.control(null),\n      amount : this.fb.control(0),\n      description : this.fb.control(null),\n      accountDestination : this.fb.control(null)\n    })}\n\n  handleSearchAccount() {\n    let accountId : string =this.accountFormGroup.value.accountId;\n    this.account$=this.accountService.getAccount(accountId,this.currentPage, this.pageSize).pipe(\n      catchError(err => {\n        this.errorMessage=err.message;\n        return throwError(err);\n      })\n    );\n  }\n\n  gotoPage(page: number) {\n    this.currentPage=page;\n    this.handleSearchAccount();\n  }\n\n  handleAccountOperation() {\n    let accountId :string = this.accountFormGroup.value.accountId;\n    let operationType=this.operationFromGroup.value.operationType;\n    let amount :number =this.operationFromGroup.value.amount;\n    let description :string =this.operationFromGroup.value.description;\n    let accountDestination :string =this.operationFromGroup.value.accountDestination;\n    if(operationType=='DEBIT'){\n      this.accountService.debit(accountId, amount,description).subscribe({\n        next : (data)=>{\n          alert(\"Success Debit\");\n          this.operationFromGroup.reset();\n          this.handleSearchAccount();\n        },\n        error : (err)=>{\n          console.log(err);\n        }\n      });\n    } else if(operationType=='CREDIT'){\n      this.accountService.credit(accountId, amount,description).subscribe({\n        next : (data)=>{\n          alert(\"Success Credit\");\n          this.operationFromGroup.reset();\n          this.handleSearchAccount();\n        },\n        error : (err)=>{\n          console.log(err);\n        }\n      });\n    }\n    else if(operationType=='TRANSFER'){\n      this.accountService.transfer(accountId,accountDestination, amount,description).subscribe({\n        next : (data)=>{\n          alert(\"Success Transfer\");\n          this.operationFromGroup.reset();\n          this.handleSearchAccount();\n        },\n        error : (err)=>{\n          console.log(err);\n        }\n      });\n\n    }\n  }\n}\n","<div class=\"container mt-5\">\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <div class=\"card shadow\">\n        <div class=\"card-header bg-primary text-white\">\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <span>Accounts</span>\n            <a class=\"btn btn-outline-light\" routerLink=\"/home\">Back to Home</a>\n          </div>\n        </div>\n        <div class=\"card-body\">\n          <form [formGroup]=\"accountFormGroup\" (ngSubmit)=\"handleSearchAccount()\">\n            <div class=\"input-group mb-3\">\n              <label class=\"input-group-text\">Account Id:</label>\n              <input type=\"text\" formControlName=\"accountId\" class=\"form-control\">\n              <button class=\"btn btn-info\">\n                <i class=\"bi bi-search\"></i>\n              </button>\n            </div>\n          </form>\n          <ng-template #errorTemplate>\n            <ng-container *ngIf=\"errorMessage; else loading\">\n              <div class=\"text-danger\">{{ errorMessage }}</div>\n            </ng-container>\n            <ng-template #loading>\n              Loading...\n            </ng-template>\n          </ng-template>\n          <ng-container *ngIf=\"account$ | async as accountDetails\">\n            <div class=\"mb-2\">\n              <label>Account ID:</label>\n              <label class=\"fw-bold\">{{ accountDetails.accountId }}</label>\n            </div>\n            <div class=\"mb-2\">\n              <label>Balance:</label>\n              <label class=\"fw-bold\">{{ accountDetails.balance | number: '1.2-2' }}</label>\n            </div>\n            <table class=\"table table-hover\">\n              <thead>\n              <tr>\n                <th>ID</th>\n                <th>Date</th>\n                <th>Type</th>\n                <th>Amount</th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr *ngFor=\"let op of accountDetails.accountOperationDTOS\">\n                <td>{{ op.id }}</td>\n                <td>{{ op.operationDate | date: 'dd-MM-yyyy:HH-mm-ss' }}</td>\n                <td>{{ op.type }}</td>\n                <td class=\"text-end\">{{ op.amount | number: '1.2-2' }}</td>\n              </tr>\n              </tbody>\n            </table>\n            <ul class=\"nav nav-pills\">\n              <li *ngFor=\"let item of [].constructor(accountDetails.totalPages); let page = index\">\n                <a [ngClass]=\"page == currentPage ? 'btn btn-info' : 'btn btn-outline-info'\" (click)=\"gotoPage(page)\" class=\"ms-1 mt-1\">{{ page }}</a>\n              </li>\n            </ul>\n          </ng-container>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-md-6\" *ngIf=\"accountFormGroup.controls['accountId'].valid && accountFormGroup.controls['accountId'].touched\">\n      <div class=\"card shadow\">\n        <div class=\"card-header bg-primary text-white\">Operations</div>\n        <div class=\"card-body\">\n          <form [formGroup]=\"operationFromGroup\" (ngSubmit)=\"handleAccountOperation()\" method=\"post\">\n            <div class=\"form-check form-check-inline\">\n              <input class=\"form-check-input\" type=\"radio\" formControlName=\"operationType\" value=\"DEBIT\">\n              <label class=\"form-check-label\">DEBIT</label>\n            </div>\n            <div class=\"form-check form-check-inline\">\n              <input class=\"form-check-input\" type=\"radio\" formControlName=\"operationType\" value=\"CREDIT\">\n              <label class=\"form-check-label\">CREDIT</label>\n            </div>\n            <div class=\"form-check form-check-inline\">\n              <input class=\"form-check-input\" type=\"radio\" formControlName=\"operationType\" value=\"TRANSFER\">\n              <label class=\"form-check-label\">TRANSFER</label>\n            </div>\n            <div class=\"mb-3\" *ngIf=\"operationFromGroup.value.operationType === 'TRANSFER'\">\n              <label class=\"form-label\">Account Destination:</label>\n              <input type=\"text\" formControlName=\"accountDestination\" class=\"form-control\">\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Amount:</label>\n              <input type=\"text\" formControlName=\"amount\" class=\"form-control\">\n            </div>\n            <div class=\"mb-3\">\n              <label class=\"form-label\">Description:</label>\n              <input type=\"text\" formControlName=\"description\" class=\"form-control\">\n            </div>\n            <div class=\"d-grid\">\n              <button class=\"btn btn-success\">Save Operation</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module"}